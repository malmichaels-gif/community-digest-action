name: 'Community Digest Action'
description: 'A weekly heartbeat for your repo â€” posts merged PRs and new contributor shoutouts to GitHub Discussions'
author: 'HeyTC Labs'

branding:
  icon: 'activity'
  color: 'orange'

inputs:
  discussion_category:
    description: 'Discussion category name to post into'
    required: true
  since_days:
    description: 'Lookback window in days'
    required: false
    default: '7'
  max_prs:
    description: 'Max merged PRs to include'
    required: false
    default: '10'
  max_new_contributors:
    description: 'Max first-time contributors to shout out'
    required: false
    default: '10'
  min_activity:
    description: 'Skip posting if activity is below this threshold'
    required: false
    default: '3'
  dry_run:
    description: 'Log the markdown without posting'
    required: false
    default: 'false'
  footer_star_link:
    description: 'Add "Generated by..." footer with a star link'
    required: false
    default: 'true'
  github_token:
    description: 'GitHub token for API access'
    required: false
    default: ${{ github.token }}

outputs:
  posted:
    description: 'Whether a digest was posted (true/false)'
  activity_count:
    description: 'Total activity count for this period'
  discussion_url:
    description: 'URL of the created discussion (if posted)'

runs:
  using: 'node20'
  main: 'dist/index.js'
